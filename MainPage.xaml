<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ToDoMaui_Listview.MainPage"
             BackgroundColor="#F5F5F5">

<VerticalStackLayout Spacing="10" VerticalOptions="FillAndExpand" HorizontalOptions="Fill">
    
    <VerticalStackLayout Padding="10" Spacing="10" BackgroundColor="White" Margin="0,0,0,10">
        <Entry x:Name="titleEntry" Placeholder="Title" PlaceholderColor="Gray" TextColor="Black" MaxLength="50"/>  
        <Editor x:Name="detailsEditor" Placeholder="Details" PlaceholderColor="Gray" TextColor="Black" MaxLength="240" HeightRequest="100"/>
        
        <Button x:Name="addBtn" IsVisible="True" Text="Add" TextColor="Black" BackgroundColor="LightBlue" Clicked="AddToDoItem"/> 
        <Button x:Name="editBtn" IsVisible="False" Text="Edit" TextColor="Black" BackgroundColor="LightGray" Clicked="EditToDoItem"/> 
        <Button x:Name="cancelBtn" IsVisible="False" Text="Cancel Edit" TextColor="Black" BackgroundColor="LightCoral" Clicked="CancelEdit"/> 
    </VerticalStackLayout>    

    <ListView x:Name="todoLV"
              VerticalOptions="FillAndExpand"
              HasUnevenRows="True"
              SeparatorVisibility="Default"
              ItemSelected="TodoLV_OnItemSelected">

        <ListView.ItemTemplate>
            <DataTemplate>
                <ViewCell>
                    <Grid Margin="10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="8*" />
                            <ColumnDefinition Width="2*" />
                        </Grid.ColumnDefinitions>
                                
                        <Label Grid.Row="0" Grid.Column="0"
                               FontSize="16"
                               Text="{Binding title}"
                               TextColor="Black"/>

                        <Label Grid.Row="1" Grid.Column="0"
                               FontSize="14"
                               Text="{Binding detail}"
                               TextColor="Black"/>

                        <Button Text="Delete"
                                BackgroundColor="LightCoral"
                                ClassId="{Binding id}"
                                Grid.Row="0"
                                Grid.RowSpan="2"
                                Grid.Column="1"
                                Clicked="DeleteToDoItem"/>
                    </Grid>
                </ViewCell>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>

</VerticalStackLayout>
</ContentPage>